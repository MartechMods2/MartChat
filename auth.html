<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mod Hive Auth</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="main2.css">
<style>
    .lg{
        height: 50px;
        width: 50px;
        border-radius: 13px;
        background:white;
        border:none;
        margin: 0 auto 10px;
        display: block;
        animation: color ease-in-out 9s infinite;
    }
    @keyframes fade{
        0% {opacity:0;}
        50%{opacity:0.5;}
        100%{opacity:1;}
    }
        @keyframes color {
        0% {background-color: white; opacity: 0.4;}  
        15%{background-color: #b2ebf2;}
        25% {background-color: #4dd0e1; opacity: 0.7;}
        35% {background-color: #00bcd4;}
        45%{background-color: #80deea;}
        50%{ background-color: white;}
        75% { background-color: #0097a7; opacity: 0.9;} 
        85% {background-color: darkgray;}
        100% {background-color: white;opacity: 1;}
        }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateX(-100px); }
        to { opacity: 1; transform: translateX(0); }
    }

</style>
<style>
body { 
  font-family: Arial, sans-serif; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  height: 100vh; 
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  transition: background-color 1.3s, color 1.3s;
}
.auth-card {
  background: #0f0f0f;
  border: 2px solid #00bcd4;
  border-radius: 15px;
  padding: 2.5rem;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 0 20px rgba(0,188,212,0.3);
  animation: fadeIn 1.5s ease-out;
}
h1 {
  color: #00bcd4;
  font-weight: bold;
  text-align: center;
  font-family:  Montserrat;
  text-shadow: 0 0 5px rgba(0,188,212,0.5);
  font-size: 800px;
}
h2 {
  color: #00bcd4;
  font-size: 5px;
  text-align: center;
  margin-bottom: 10px;
}
@media (max-width: 600px) {
  .auth-card {
    padding: 1.5rem;
  }
  body {
    padding: 10px;
  }
}
input {
  background: #1a1a1a;
  border: 1px solid #335;
  padding: 0.6rem;
  border-radius: 6px;
  color: #fff;
  font-family:monospace;
  width: 100%;
  height: 40px;
  margin-bottom: 0.8rem;
}
input:focus {
  outline: none;
  border-color: #00bcd4;
  box-shadow: 0 0 8px rgba(0,188,212,0.5);
}
button {
  background: #00bcd4;
  padding: 0.6rem;
  border-radius: 6px;
  color: #fff;
  border: 1.5px solid #0097a7;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
  transition: 0.3s;
}
button:hover {
  background: #0097a7;
}
.light-theme .auth-card {
  background: #ffffff;
  border: 2px solid #00bcd4;
  box-shadow: 0 0 20px rgba(0,188,212,0.3);
}
.light-theme input {
  background: #f5f5f5;
  border: 1px solid #ccc;
  color: #000;
}
.light-theme input:focus {
  border-color: #00bcd4;
  box-shadow: 0 0 8px rgba(0,188,212,0.5);
}
.light-theme button {
  background: #00bcd4;
  color: #fff;
  border: 1.5px solid #0097a7;
}
.light-theme button:hover {
  background: #0097a7;
}
.light-theme .tab-buttons button {
  color: #00bcd4;
}
.light-theme .tab-buttons button.active {
  background: #00bcd4;
  color: #fff;
}
.light-theme .auth-btn {
  background: #f5f5f5;
  color: #000;
  border: 1px solid #ccc;
}
.light-theme .auth-btn:hover {
  background: #e0e0e0;
}
.tab { display: none; }
.tab.active { display: block; }
.tab-buttons button {
  background: transparent;
  color: #00bcd4;
  border: none;
  cursor: pointer;
  font-weight: bold;
  padding: 0.5rem;
}
.tab-buttons button:hover { text-decoration: underline; }
.auth-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 0.5rem;
  padding: 0.6rem;
  background: #1a1a1a;
  border: 1px solid #333;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.3s;
}
.auth-btn:hover {
  background: #222;
  border-color: #00bcd4;
}
.password-field {
  position: relative;
  margin-bottom: 0.8rem;
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
.eye-btn {
  background: none;
  border: none;
  color: #00bcd4;
  cursor: pointer;
  margin-top: 5px;
  align-self: center;
  padding: 2px;
}
</style>
</head>
<body class="light-theme">

<div class="auth-card">
    <div class="lg">
  <img src="best logo.png" loading="lazy" width="58" height="58" alt="ModHive logo"></div>
  <button class="icon-btn theme-toggle" id="themeToggle" onclick="toggleTheme()" style="position: absolute; top: 10px; right: 10px;" aria-label="Toggle theme">
    <svg id="themeIcon" viewBox="0 0 24 24" fill="none" width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </button>
  <h1 style="font-size: 25px;" ><img style="width: 220px; padding: 10px 45px; display: block; margin: 0 auto;" src="lg3.png" loading="lazy" alt="ModHive wordmark"></h1>
  <h2 style="font-size: 10px;" >Advanced Moderation for the Digital Age</h2>
  <p class="text-gray-400 text-center mb-4" style="font-size: 8px; animation: fade 2s">"Welcome to 2026: The future belongs to those who innovate."</p>

  <!-- Tab buttons -->
  <div class="flex justify-around tab-buttons mb-4">
    <button onclick="showTab('login')">Login</button>
    <button onclick="showTab('signup')">Sign Up</button>
    <button onclick="showTab('forgot')">Forgotten Password?</button>
  </div>

  <!-- Login Tab -->
  <div id="login" class="tab active">
    <input id="loginEmail" placeholder="Email" style="margin:20px 0px 15px 0px; padding-left:10px;font-family:monospace;">
    <div class="password-field">
      <input id="loginPassword" type="password" placeholder="Password" style="padding-left:10px;font-family:monospace;">
      <button type="button" onclick="togglePassword('loginPassword')" class="eye-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button>
    </div>
    <button onclick="login()" style="margin: 20px 5px 40px 0px; height: 40px;">Login</button>
    <div id="loginError" class="text-red-400 text-sm mt-2"></div>
    <div class="mt-4">
      <div onclick="socialLogin('google')" class="auth-btn"><svg width="18" height="18" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Login with Google</div>
      <div onclick="socialLogin('github')" class="auth-btn"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg> Login with GitHub</div>
    </div>
  </div>

  <!-- Sign Up Tab -->
  <div id="signup" class="tab">
    <input id="signupEmail" placeholder="Email"style="margin:20px 0px 15px 0px; padding-left:10px;font-family:monospace;" >
    <div class="password-field">
      <input id="signupPassword" style="padding-left:10px;font-family:monospace;" type="password" placeholder="Password (min 6 chars)">
      <button type="button" onclick="togglePassword('signupPassword')" class="eye-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button>
    </div>
    <button onclick="signup()"style="margin: 20px 5px 40px 0px; height: 40px;">Sign Up</button>
    <div id="signupError" class="text-red-400 text-sm mt-2"></div>
  </div>

  <!-- Forgot Password Tab -->
  <div id="forgot" class="tab">
    <input id="forgotEmail"style="font-family:monospace;padding-left:10px;" placeholder="Enter your email">
    <button onclick="resetPassword()"style="margin: 20px 5px 40px 0px; height: 40px;">Send Reset Email</button>
    <div id="forgotMsg" class="text-green-400 text-sm mt-2"></div>
  </div>
  <p class="copyright-text" style="font-size:10px; margin-top:15px;text-align:center;">Copyright &copy; 2026 All Rights Reserved by 
         <a style="color:white; text-decoration:none;" href="ModHive.html">Modhive</a>.
            </p>
  <div style="text-align: center; margin-top: 20px; color: #666; font-size: 12px;">
    <p><svg width="14" height="14" viewBox="0 0 24 24" style="vertical-align:middle; margin-right:6px;"><path fill="currentColor" d="M12 2l1.5 4.5L18 8l-3 2.5L15.5 15 12 12.5 8.5 15l.5-4.5L6 8l4.5-1.5L12 2z"></path></svg> AI-Powered Moderation</p>
    <p><svg width="14" height="14" viewBox="0 0 24 24" style="vertical-align:middle; margin-right:6px;"><path fill="currentColor" d="M12 1L3 5v6c0 5.25 3.75 10 9 11 5.25-1 9-5.75 9-11V5l-9-4zM12 8a4 4 0 100 8 4 4 0 000-8z"></path></svg> Enhanced Security Features</p>
    <p><svg width="14" height="14" viewBox="0 0 24 24" style="vertical-align:middle; margin-right:6px;"><path fill="currentColor" d="M2 12l4-2 4 2 4-2 4 2 4-2v8H2v-6z"></path></svg> Real-time Analytics Dashboard</p>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<script>
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAgx0jy6we6cvnIgKbS1fBoeRfSD2MDszo",
  authDomain: "mod-hive.firebaseapp.com",
  projectId: "mod-hive",
  storageBucket: "mod-hive.firebasestorage.app",
  messagingSenderId: "982583858832",
  appId: "1:982583858832:web:44d5e4e2edd77fac06ea15",
  measurementId: "G-PK2DRED7FB"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

/* ====== Redirect if logged in ====== */
auth.onAuthStateChanged(user => {
  if (user) {
    window.location.href = "dashboard.html";
  }
});

/* ====== Tabs ====== */
function showTab(tab) {
  document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
  document.getElementById(tab).classList.add('active');
}

/* ====== Login ====== */
function login() {
  const email = document.getElementById("loginEmail").value.trim();
  const pass = document.getElementById("loginPassword").value;
  if (!email || !pass) {
    document.getElementById("loginError").innerText = "Please fill all fields.";
    return;
  }
  if (!/\S+@\S+\.\S+/.test(email)) {
    document.getElementById("loginError").innerText = "Please enter a valid email.";
    return;
  }
  const btn = document.querySelector('#login button');
  btn.disabled = true;
  btn.innerText = "Logging in...";
  auth.signInWithEmailAndPassword(email, pass)
    .then(() => { window.location.href = "dashboard.html"; })
    .catch(err => { 
      document.getElementById("loginError").innerText = err.message; 
      btn.disabled = false;
      btn.innerText = "Login";
    });
}

/* ====== Sign Up ====== */
function signup() {
  const email = document.getElementById("signupEmail").value.trim();
  const pass = document.getElementById("signupPassword").value;
  if (!email || !pass) {
    document.getElementById("signupError").innerText = "Please fill all fields.";
    return;
  }
  if (!/\S+@\S+\.\S+/.test(email)) {
    document.getElementById("signupError").innerText = "Please enter a valid email.";
    return;
  }
  if (pass.length < 6) {
    document.getElementById("signupError").innerText = "Password must be at least 6 characters.";
    return;
  }
  const btn = document.querySelector('#signup button');
  btn.disabled = true;
  btn.innerText = "Signing up...";
  auth.createUserWithEmailAndPassword(email, pass)
    .then(cred => {
      const uid = cred.user.uid;
      db.collection("users").doc(uid).set({
        nickname: email.split('@')[0],
        rank: "Rookie",
        points: 0,
        bio: "",
        profilePhoto: "",
        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
        lastLogin: firebase.firestore.FieldValue.serverTimestamp(),
        loginMethod: "email"
      }).then(() => { window.location.href = "dashboard.html"; });
    })
    .catch(err => { 
      document.getElementById("signupError").innerText = err.message; 
      btn.disabled = false;
      btn.innerText = "Sign Up";
    });
}

/* ====== Forgot Password ====== */
function resetPassword() {
  const email = document.getElementById("forgotEmail").value.trim();
  if (!email) {
    document.getElementById("forgotMsg").innerText = "Please enter your email.";
    return;
  }
  if (!/\S+@\S+\.\S+/.test(email)) {
    document.getElementById("forgotMsg").innerText = "Please enter a valid email.";
    return;
  }
  const btn = document.querySelector('#forgot button');
  btn.disabled = true;
  btn.innerText = "Sending...";
  auth.sendPasswordResetEmail(email)
    .then(() => { 
      document.getElementById("forgotMsg").innerText = "Password reset email sent!"; 
      btn.disabled = false;
      btn.innerText = "Send Reset Email";
    })
    .catch(err => { 
      document.getElementById("forgotMsg").innerText = err.message; 
      btn.disabled = false;
      btn.innerText = "Send Reset Email";
    });
}

/* ====== Social Logins ====== */
function socialLogin(providerName) {
  let provider;
  if (providerName === "google") provider = new firebase.auth.GoogleAuthProvider();
  if (providerName === "facebook") provider = new firebase.auth.FacebookAuthProvider();
  if (providerName === "github") provider = new firebase.auth.GithubAuthProvider();

  auth.signInWithPopup(provider)
    .then(result => {
      if (result.additionalUserInfo.isNewUser) {
        const user = result.user;
        db.collection("users").doc(user.uid).set({
          nickname: user.displayName || user.email.split('@')[0],
          rank: "Rookie",
          points: 0,
          bio: "",
          profilePhoto: user.photoURL || "",
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          lastLogin: firebase.firestore.FieldValue.serverTimestamp(),
          loginMethod: providerName
        });
      }
      window.location.href = "dashboard.html";
    })
    .catch(err => { alert(err.message); });
}

function togglePassword(id) {
  const input = document.getElementById(id);
  const btn = input.nextElementSibling;
  if (input.type === 'password') {
    input.type = 'text';
    btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>';
  } else {
    input.type = 'password';
    btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>';
  }
}

// Enhanced theme toggle with animation and persistence
function toggleTheme() {
  const body = document.body;
  const themeBtn = document.getElementById('themeToggle');
  const sunSVG = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v2M12 19v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>';
  const moonSVG = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>';
  if (body.classList.contains('dark-theme')) {
    body.classList.remove('dark-theme');
    body.classList.add('light-theme');
    if (themeBtn) themeBtn.innerHTML = moonSVG;
    localStorage.setItem('theme','light');
  } else {
    body.classList.remove('light-theme');
    body.classList.add('dark-theme');
    if (themeBtn) themeBtn.innerHTML = sunSVG;
    localStorage.setItem('theme','dark');
  }
}

// Load saved theme on page load
window.addEventListener('DOMContentLoaded', function() {
    const savedTheme = localStorage.getItem('theme');
    
    if (savedTheme === 'dark') {
      document.body.classList.remove('light-theme');
      document.body.classList.add('dark-theme');
      const sunSVG = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v2M12 19v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>';
      document.getElementById('themeToggle').innerHTML = sunSVG;
    } else {
      // Default to light theme
    }
});
</script>

<!-- Image fallback: replace broken images with a safe fallback and add subtle shadow -->
<script>
  (function(){
    function applyFallback(img){
      img.addEventListener('error', function(){
        if (!img.dataset.fallbackApplied){
          img.dataset.fallbackApplied = '1';
          img.src = 'lg.png';
          img.classList.add('box-shadow');
        }
      });
    }
    document.querySelectorAll('img').forEach(function(img){
      // ensure lazy loading and alt are present when possible
      if (!img.hasAttribute('loading')) img.setAttribute('loading','lazy');
      if (!img.hasAttribute('alt')) img.setAttribute('alt','image');
      applyFallback(img);
    });
  })();
</script>

</body>
</html>
